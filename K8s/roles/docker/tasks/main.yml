---
# tasks file for docker
- name: Create a directory /etc/apt/keyrings if it does not exist
  become: true
  ansible.builtin.file:
   path: /etc/apt/keyrings
   state: directory
   mode: '0755'
- name: Add Docker apt-key
  become: true
  ansible.builtin.get_url:
   url: https://download.docker.com/linux/ubuntu/gpg
   dest: /etc/apt/keyrings/docker-apt-keyring.asc
   mode: '0644'
   force: true
- name: Add Docker's APT repository
  become: true
  ansible.builtin.apt_repository:
   repo: "deb [arch={{ 'amd64' if ansible_architecture == 'x86_64' else 'arm64' }} signed-by=/etc/apt/keyrings/docker-apt-keyring.asc] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable"
   state: present
   update_cache: yes